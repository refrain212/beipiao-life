# 北漂人生 - 完整版部署指南

这个项目现在包含了前端游戏和后端服务器，实现了用户系统、云存档、排行榜等功能。

## 📁 项目结构

```
d:\Program Files\web\
├── index.html              # 前端游戏页面
├── js/
│   └── api.js             # 前后端通信API
├── backend/
│   ├── server.js          # 后端服务器
│   └── package.json       # 后端依赖配置
└── README-FULLSTACK.md    # 本文件
```

## 🚀 快速开始

### 1. 安装 Node.js
- 访问 https://nodejs.org 下载并安装 Node.js
- 安装完成后重启命令行

### 2. 安装后端依赖
```powershell
# 进入后端目录
cd "d:\Program Files\web\backend"

# 安装依赖
npm install
```

### 3. 启动后端服务器
```powershell
# 在backend目录中运行
npm start
```

看到以下信息表示启动成功：
```
🚀 服务器启动成功！
📱 游戏地址: http://localhost:3000
🔧 API地址: http://localhost:3000/api
```

### 4. 访问游戏
- 打开浏览器
- 访问 http://localhost:3000
- 现在你可以注册账户、保存游戏、查看排行榜了！

## 🎮 新增功能

### 用户系统
- **注册/登录**：点击右上角"登录/注册"按钮
- **云存档**：登录后可保存/加载游戏进度
- **多设备同步**：在任何设备上登录都能继续游戏

### 社交功能
- **排行榜**：查看全服玩家财富排行
- **成就系统**：展示个人游戏数据

### 数据持久化
- 游戏进度自动保存到服务器
- 刷新页面不会丢失进度
- 支持多个存档

## 🔧 API接口说明

后端提供以下API接口：

| 接口 | 方法 | 功能 | 是否需要登录 |
|------|------|------|-------------|
| `/api/register` | POST | 用户注册 | ❌ |
| `/api/login` | POST | 用户登录 | ❌ |
| `/api/save-game` | POST | 保存游戏 | ✅ |
| `/api/load-game` | GET | 加载游戏 | ✅ |
| `/api/leaderboard` | GET | 排行榜 | ❌ |
| `/api/user-info` | GET | 用户信息 | ✅ |

## 🌐 部署到生产环境

### 本地测试
现在的配置适合本地开发和测试。

### 部署到服务器
如果要部署到真实服务器：

1. **购买云服务器**（阿里云、腾讯云等）
2. **配置域名**
3. **修改API地址**：
   ```javascript
   // 在 js/api.js 中修改
   const API_BASE_URL = 'https://你的域名.com/api';
   ```
4. **使用真实数据库**（MySQL、PostgreSQL、MongoDB等）
5. **配置HTTPS**
6. **使用进程管理器**（PM2等）

## 🔄 前后端通信流程

```
前端(浏览器) ←→ 后端(Node.js服务器) ←→ 数据库(内存/文件)
     ↓                    ↓                      ↓
  - 用户界面          - API处理               - 数据存储
  - 游戏逻辑          - 用户认证               - 用户信息
  - HTTP请求          - 数据验证               - 游戏存档
```

### 通信示例：
1. **保存游戏**：
   - 前端：收集游戏数据 → 发送POST请求到 `/api/save-game`
   - 后端：验证用户身份 → 保存数据到内存 → 返回成功响应
   - 前端：显示保存成功提示

2. **加载游戏**：
   - 前端：发送GET请求到 `/api/load-game`
   - 后端：验证用户身份 → 从内存读取数据 → 返回游戏数据
   - 前端：恢复游戏状态 → 更新界面

## 🎯 这就是一个完整的网站！

是的！你现在拥有的就是一个完整的网站：

- ✅ **前端**：HTML + CSS + JavaScript（游戏界面）
- ✅ **后端**：Node.js + Express（服务器逻辑）
- ✅ **数据库**：内存存储（可扩展为真实数据库）
- ✅ **API**：RESTful接口（前后端通信）
- ✅ **用户系统**：注册、登录、认证
- ✅ **部署**：本地服务器（可扩展到云服务器）

这个架构可以扩展成任何规模的Web应用！

## 🚧 后续可以添加的功能

- 📊 数据统计和分析
- 👥 好友系统
- 🎁 每日任务和奖励
- 💬 聊天功能
- 🏆 成就系统
- 📱 移动端适配
- 🔄 实时同步（WebSocket）
- 📧 邮件通知
- 💳 支付系统

## ❓ 常见问题

**Q: 为什么访问 localhost:3000 显示连接被拒绝？**
A: 检查后端服务器是否已启动，确保在backend目录中运行了 `npm start`

**Q: 注册时显示网络错误？**
A: 确保后端服务器正在运行，并且前端的API_BASE_URL配置正确

**Q: 游戏数据会丢失吗？**
A: 目前数据保存在内存中，重启服务器会丢失。要永久保存需要配置真实数据库。

**Q: 可以在其他电脑上访问吗？**
A: 目前只能在本机访问。要让其他设备访问，需要将后端部署到公网服务器。